(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{305:function(e,t,o){"use strict";t.a={s3BucketUrl:"https://year-temperatures.s3.eu-west-1.amazonaws.com",dailyAnomalyColorPalette:["purple","indigo","blue","normal","yellow","orange","red"],dailyColorAnomalyThresholds:[-5,-3.5,-1.5,1.5,3.5,5],dates:[{key:"blue",popover:{label:"Temperatura mitja >1.5º per baix del normal"},highlight:{contentClass:"anomaly-cold--1",fillMode:"light"},dates:[]},{key:"indigo",popover:{label:"Temperatura mitja >3.5º per baix del normal"},highlight:{contentClass:"anomaly-cold--2",fillMode:"light"},dates:[]},{key:"purple",popover:{label:"Temperatura mitja >5º per baix del normal"},highlight:{contentClass:"anomaly-cold--3",fillMode:"light"},dates:[]},{key:"red",popover:{label:"Temperatura mitja >5º per dalt del normal"},highlight:{contentClass:"anomaly-hot--3",fillMode:"light"},dates:[]},{key:"orange",popover:{label:"Temperatura mitja >3.5º per dalt del normal"},highlight:{contentClass:"anomaly-hot--2",fillMode:"light"},dates:[]},{key:"yellow",popover:{label:"Temperatura mitja >1.5º per dalt del normal"},highlight:{contentClass:"anomaly-hot--1",fillMode:"light"},dates:[]},{key:"normal",popover:{label:"Temperatura mitja normal per a la data"},highlight:{contentClass:"normal",fillMode:"light"},dates:[]}]}},310:function(e,t,o){var content=o(343);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(67).default)("e6ac7ae0",content,!0,{sourceMap:!1})},341:function(e,t,o){"use strict";var r=o(2),n=o(69).findIndex,c=o(150),l="findIndex",d=!0;l in[]&&Array(1)[l](function(){d=!1}),r({target:"Array",proto:!0,forced:d},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},342:function(e,t,o){"use strict";o(310)},343:function(e,t,o){var r=o(66)(!1);r.push([e.i,'.md-layout-item{height:40px;margin-top:8px;margin-bottom:8px;transition:.3s 500}.md-layout-item:after{width:100%;height:100%;display:block;background:md-get-palette-color(purple, 200);content:" "}.centered-text{text-align:center}.normal{background-color:#f7f7f7}.anomaly--1{background-color:#fddbc7}.anomaly--2{background-color:#ef8a62}.anomaly--3{background-color:#b2182b}.anomaly--4{background-color:#d1e5f0}.anomaly--5{background-color:#67a9cf}.anomaly--6{background-color:#2166ac}body{min-height:unset}',""]),e.exports=r},355:function(e,t,o){"use strict";o.r(t);o(29);var r=o(12),n=(o(68),o(113),o(341),o(48),o(49),o(21),o(50),o(149)),c=o(305),l={data:function(){return{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],currentYear:n.a,yearAvg:0,year:n.a,calculated:!1,colorPalette:["#2166ac","#67a9cf","#d1e5f0","#e0dede","#fddbc7","#ef8a62","#b2182b"],colorMapRange:[-2,-1.25,-.5,.5,1.25,2]}},computed:{yearText:function(){return 0===this.yearAvg?"".concat(this.year):"".concat(this.year," ").concat(Math.round(100*this.yearAvg)/100)}},layout:"menu",created:function(){this.months=this.months.map(function(e){return{name:e}}),this.requestMonthData()},methods:{calculateMonthsAnomalies:function(){var e=this,t=[0,1,5,6],o=0,r=(new Date).getMonth();try{this.months.forEach(function(n,i){var c=e.yearMonthAvgTemperature.aggregations[2].buckets[i];if(void 0===c||e.year===e.currentYear&&i>=r)return n.anomaly=0,n.textColor="black",n.color="transparent",void(n.text=n.name);o+=c[1].value,n.anomaly=c[1].value-e.monthlyAbsoluteAvg.aggregations[2].buckets[i][1].value,n.color=e.getColorAnomaly(n.anomaly);var l=e.colorPalette.findIndex(function(e){return e===n.color});n.textColor=t.includes(l)?"white":"black";var d=n.anomaly&&n.anomaly>0?"+":"";n.text=n.anomaly?"".concat(n.name,"  ").concat(d).concat(Math.round(100*n.anomaly)/100):n.name});var n=this.year===this.currentYear?r:12;this.yearAvg=n>0?o/n:0}catch(e){this.yearAvg=0}this.calculated=!0},getColorAnomaly:function(e){return e<this.colorMapRange[0]?this.colorPalette[0]:e>=this.colorMapRange[0]&&e<this.colorMapRange[1]?this.colorPalette[1]:e>=this.colorMapRange[1]&&e<this.colorMapRange[2]?this.colorPalette[2]:e>=this.colorMapRange[2]&&e<this.colorMapRange[3]?this.colorPalette[3]:e>=this.colorMapRange[3]&&e<this.colorMapRange[4]?this.colorPalette[4]:e>=this.colorMapRange[4]&&e<=this.colorMapRange[5]?this.colorPalette[5]:this.colorPalette[6]},requestMonthData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var o,r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.year===e.currentYear?"":"-".concat(e.year),t.next=1,fetch("".concat(c.a.s3BucketUrl,"/monthly-temperatures").concat(o,".json"),{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow"});case 1:return r=t.sent,t.next=2,r.json();case 2:return e.yearMonthAvgTemperature=t.sent,t.next=3,fetch("https://sergitopo.github.io/temperature-calendar/client/page/monthly-avg.json",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"origin"});case 3:return n=t.sent,t.next=4,n.json();case 4:e.monthlyAbsoluteAvg=t.sent,e.calculatedDates=e.calculateMonthsAnomalies();case 5:case"end":return t.stop()}},t)}))()}},watch:{year:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark(function e(){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.calculated=!1,o=t.year===t.currentYear?"":"-".concat(t.year),e.next=1,fetch("".concat(c.a.s3BucketUrl,"/monthly-temperatures").concat(o,".json"),{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow"});case 1:return r=e.sent,e.next=2,r.json();case 2:t.yearMonthAvgTemperature=e.sent,t.calculatedDates=t.calculateMonthsAnomalies();case 3:case"end":return e.stop()}},e)}))()}}},d=(o(342),o(23)),component=Object(d.a)(l,function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"vc-arrows-container title-center"},[t("div",{directives:[{name:"show",rawName:"v-show",value:2015!==e.year,expression:"2015 !== year"}],staticClass:"vc-flex vc-justify-center vc-items-center vc-cursor-pointer vc-select-none vc-pointer-events-auto vc-text-gray-600 vc-rounded vc-border-2 vc-border-transparent hover:vc-opacity-50 hover:vc-bg-gray-300 focus:vc-border-gray-300",attrs:{role:"button"},on:{click:function(t){e.year--}}},[t("svg",{staticClass:"vc-svg-icon",attrs:{"data-v-63f7b5ec":"",width:"26px",height:"26px",viewBox:"0 -1 16 34"}},[t("path",{attrs:{"data-v-63f7b5ec":"",d:"M11.196 10c0 0.143-0.071 0.304-0.179 0.411l-7.018 7.018 7.018 7.018c0.107 0.107 0.179 0.268 0.179 0.411s-0.071 0.304-0.179 0.411l-0.893 0.893c-0.107 0.107-0.268 0.179-0.411 0.179s-0.304-0.071-0.411-0.179l-8.321-8.321c-0.107-0.107-0.179-0.268-0.179-0.411s0.071-0.304 0.179-0.411l8.321-8.321c0.107-0.107 0.268-0.179 0.411-0.179s0.304 0.071 0.411 0.179l0.893 0.893c0.107 0.107 0.179 0.25 0.179 0.411z"}})])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.currentYear!==e.year,expression:"currentYear !== year"}],staticClass:"vc-flex vc-justify-center vc-items-center vc-cursor-pointer vc-select-none vc-pointer-events-auto vc-text-gray-600 vc-rounded vc-border-2 vc-border-transparent hover:vc-opacity-50 hover:vc-bg-gray-300 focus:vc-border-gray-300",attrs:{role:"button"},on:{click:function(t){e.year++}}},[t("svg",{staticClass:"vc-svg-icon",attrs:{"data-v-63f7b5ec":"",width:"26px",height:"26px",viewBox:"-5 -1 16 34"}},[t("path",{attrs:{"data-v-63f7b5ec":"",d:"M10.625 17.429c0 0.143-0.071 0.304-0.179 0.411l-8.321 8.321c-0.107 0.107-0.268 0.179-0.411 0.179s-0.304-0.071-0.411-0.179l-0.893-0.893c-0.107-0.107-0.179-0.25-0.179-0.411 0-0.143 0.071-0.304 0.179-0.411l7.018-7.018-7.018-7.018c-0.107-0.107-0.179-0.268-0.179-0.411s0.071-0.304 0.179-0.411l0.893-0.893c0.107-0.107 0.268-0.179 0.411-0.179s0.304 0.071 0.411 0.179l8.321 8.321c0.107 0.107 0.179 0.268 0.179 0.411z"}})])])]),e._v(" "),e.calculated?t("div",{staticClass:"md-layout md-gutter md-alignment-center",staticStyle:{margin:"2em","padding-bottom":"5em"}},[t("div",{staticStyle:{"padding-bottom":"1em","font-size":"1.5rem"}},[e._v(e._s(e.yearText))]),e._v(" "),e._l(e.months,function(o){return t("div",{staticClass:"md-layout-item md-large-size-100 centered-text",staticStyle:{"padding-top":"0.5em"},style:{background:o.color,color:o.textColor}},[e._v(e._s(o.text||o.name))])})],2):e._e()])},[],!1,null,null,null);t.default=component.exports}}]);